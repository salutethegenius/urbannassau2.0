// Prisma schema for Urban Nassau Rides

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String   // hashed with bcrypt
  name      String?
  createdAt DateTime @default(now())
}

model FareSettings {
  id               Int      @id @default(1)
  rideStandardBase Decimal  @default(15) @db.Decimal(10, 2)
  ridePremiumBase  Decimal  @default(20) @db.Decimal(10, 2)
  freeDistance     Decimal  @default(5) @db.Decimal(10, 2)
  perMileRate      Decimal  @default(4) @db.Decimal(10, 2)
  passengerFee     Decimal  @default(5) @db.Decimal(10, 2)
  courierBase      Decimal  @default(12) @db.Decimal(10, 2)
  errandBase       Decimal  @default(25) @db.Decimal(10, 2)
  shoppingBase     Decimal  @default(50) @db.Decimal(10, 2)
  transportBase    Decimal  @default(20) @db.Decimal(10, 2)
  updatedAt        DateTime @updatedAt
}

model FareHistory {
  id             Int      @id @default(autoincrement())
  serviceType    String
  pickupAddress  String
  dropoffAddress String
  distance       Decimal  @db.Decimal(10, 2)
  passengers     Int
  baseFare       Decimal  @db.Decimal(10, 2)
  distanceFare   Decimal  @db.Decimal(10, 2)
  passengerFare  Decimal  @db.Decimal(10, 2)
  totalFare      Decimal  @db.Decimal(10, 2)
  createdAt      DateTime @default(now())
}

model Booking {
  id             Int      @id @default(autoincrement())
  bookingDate    DateTime // The date of the booking
  bookingHour    Int      // Hour of day (0-23)
  serviceType    String
  pickupAddress  String
  dropoffAddress String
  distance       Decimal  @db.Decimal(10, 2)
  passengers     Int
  totalFare      Decimal  @db.Decimal(10, 2)
  customerPhone  String?
  status         String   @default("pending") // pending, confirmed, completed, cancelled
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}
